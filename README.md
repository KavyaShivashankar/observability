# Monitoring
This repository contains examples for configuring monitoring of Redpanda using Prometheus and Grafana.

> [!NOTE]
> This version is designed to work with the `public_metrics` endpoint that was introduced in Redpanda 22.2 and is provided by Redpanda Cloud. If you are running an older version of Redpanda please use the [legacy version](../../tree/legacy_metrics) of these dashboards.

> [!IMPORTANT]
> The latest version of the [Redpanda Ops Dashboard](grafana-dashboards/Redpanda-Ops-Dashboard.json) includes the newer Kafka handler latency metric, specifically `redpanda_kafka_handler_latency_seconds_bucket{handler="produce"}` and `redpanda_kafka_handler_latency_seconds_bucket{handler="consume"}`. This metric is only available from Redpanda versions `23.2+` and `23.1.18+`.

## Grafana Dashboards
The [grafana-dashboards](grafana-dashboards) folder contains sample dashboards that can be imported directly into a 
Grafana or Grafana Cloud instance.

The following dashboards are provided as examples:

- [Redpanda Ops Dashboard](grafana-dashboards/Redpanda-Ops-Dashboard.json) - Provides an overview of KPIs for a Redpanda
cluster with health indicators. This is suitable for ops or SRE to monitor on a daily or continuous basis.
- [Kafka Topic Metrics](grafana-dashboards/Kafka-Topic-Metrics.json) - Provides throughput, read/write rates, and 
on-disk sizes of each/all topics.
- [Kafka Consumer Offsets](grafana-dashboards/Kafka%20Consumer%20Offsets.json) - Metrics and KPIs that provide details 
of topic consumers and how far they are lagging behind the end of the log.
- [Redpanda Dashboard](grafana-dashboards/Redpanda-Default-Dashboard.json) - The default dashboard that would be generated by 
the [`rpk generate grafana-dashboard` command](
https://docs.redpanda.com/docs/platform/reference/rpk/rpk-generate/rpk-generate-grafana-dashboard/).
_Note: This is considered deprecated in favour of the above dashboards._
- [Kafka Consumer Metrics](grafana-dashboards/Kafka-Consumer-Metrics.json) - Allows for monitoring of Java Kafka 
consumers, using the [Prometheus JMX Exporter](https://github.com/prometheus/jmx_exporter) and the
[Kafka Sample Configuration](https://github.com/prometheus/jmx_exporter/blob/master/example_configs/kafka-2_0_0.yml).

## Screenshots
![](docs/images/Ops%20Dashboard.png)
![](docs/images/Consumer%20Offsets.png)
![](docs/images/Topic%20Metrics.png)

# Alerting
This repository contains examples for configuring alerting using [Prometheus](https://prometheus.io/) (via [Alert Manager](https://prometheus.io/docs/alerting/latest/alertmanager/)) or [Grafana](https://grafana.com/).

Grafana can use Alert Manager as a source of alerts, or it can manage alerts independently of Prometheus.


## Screenshots
![](docs/images/Grafana%20Alerting.png)

# Examples

### Sandbox Environment
The [demo](demo) folder includes a full dockerized sandbox, that will spin up a three-node Redpanda cluster, an instance
of Redpanda Console, a Prometheus instance and a Grafana instance with Prometheus and Grafana configured with the
dashboards in the [grafana-dashboards](grafana-dashboards) folder.

### Redpanda Cloud
The [cloud](cloud) folder has a Docker Compose file that will bring up Prometheus and Grafana, with instructions on
how to scrape the Prometheus endpoint exposed by your Redpanda Cloud cluster

